public class AccountServiceImpl implements AccountService {

    private double acc1Balance;
    private double acc2Balance;
    private boolean acc1Exists;
    private boolean acc2Exists;

    // optional flag to simulate a failed debit operation (for testing)
    public boolean failNextDebit = false;

    public AccountServiceImpl() {
        // Initialize two accounts
        acc1Balance = 1000.0;
        acc2Balance = 500.0;
        acc1Exists = true;
        acc2Exists = true;
    }

    @Override
    public boolean exists(String accountNumber) {
        return (accountNumber.equals("A1") && acc1Exists)
            || (accountNumber.equals("A2") && acc2Exists);
    }

    @Override
    public double getBalance(String accountNumber) {
        if (accountNumber.equals("A1")) return acc1Balance;
        if (accountNumber.equals("A2")) return acc2Balance;
        return 0.0;
    }

    @Override
    public boolean debit(String accountNumber, double amount) {
        if (failNextDebit) {
            failNextDebit = false;
            return false;
        }

        if (accountNumber.equals("A1") && acc1Balance >= amount) {
            acc1Balance -= amount;
            return true;
        } else if (accountNumber.equals("A2") && acc2Balance >= amount) {
            acc2Balance -= amount;
            return true;
        }
        return false;
    }

    @Override
    public boolean credit(String accountNumber, double amount) {
        if (accountNumber.equals("A1") && acc1Exists) {
            acc1Balance += amount;
            return true;
        } else if (accountNumber.equals("A2") && acc2Exists) {
            acc2Balance += amount;
            return true;
        }
        return false;
    }
}
