import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class FundTransferTest {

    private BankAccount sender;
    private BankAccount receiver;
    private FundTransfer fundTransfer;

    @BeforeEach
    void setUp() {
        sender = new BankAccount("Alice", 1000.0);
        receiver = new BankAccount("Bob", 500.0);
        fundTransfer = new FundTransfer();
    }

    @Test
    void testSuccessfulTransfer() {
        boolean result = fundTransfer.transfer(sender, receiver, 200.0);
        assertTrue(result, "Transfer should return true");
        assertEquals(800.0, sender.getBalance(), "Sender balance should decrease by 200");
        assertEquals(700.0, receiver.getBalance(), "Receiver balance should increase by 200");
    }

    @Test
    void testTransferInsufficientBalance() {
        Exception ex = assertThrows(IllegalArgumentException.class, 
            () -> fundTransfer.transfer(sender, receiver, 2000.0));
        assertEquals("Insufficient balance in sender's account", ex.getMessage());
    }

    @Test
    void testTransferNegativeAmount() {
        Exception ex = assertThrows(IllegalArgumentException.class, 
            () -> fundTransfer.transfer(sender, receiver, 100.0));
        assertEquals("Transfer amount must be positive", ex.getMessage());
    }

    @Test
    void testTransferZeroAmount() {
        Exception ex = assertThrows(IllegalArgumentException.class, 
            () -> fundTransfer.transfer(sender, receiver, 0));
        assertEquals("Transfer amount must be positive", ex.getMessage());
    }

    @Test
    void testTransferWithNullAccounts() {
        assertThrows(IllegalArgumentException.class, 
            () -> fundTransfer.transfer(null, receiver, 100));
        assertThrows(IllegalArgumentException.class, 
            () -> fundTransfer.transfer(sender, null, 100));
    }

    @Test
    void testMultipleTransfers() {
        fundTransfer.transfer(sender, receiver, 100);
        fundTransfer.transfer(sender, receiver, 50);
        assertAll("Multiple Transfers",
            () -> assertEquals(850, sender.getBalance()),
            () -> assertEquals(650, receiver.getBalance())
        );
    }
}
