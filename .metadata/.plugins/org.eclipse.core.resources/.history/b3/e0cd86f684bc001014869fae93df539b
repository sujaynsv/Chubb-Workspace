public class FundTransferService {

    private final AccountService accountService;

    public FundTransferService(AccountService accountService) {
        this.accountService = accountService;
    }

    public String transfer(String fromAccount, String toAccount, double amount) {

        if (amount <= 0) {
            return "FAILURE: Invalid amount";
        }

        if (fromAccount.equals(toAccount)) {
            return "FAILURE: Source and destination cannot be same";
        }

        double fromBalance = accountService.getBalance(fromAccount);
        if (fromBalance < amount) {
            return "FAILURE: Insufficient funds";
        }

        if (!accountService.exists(toAccount)) {
            return "FAILURE: Destination account not found";
        }

        boolean debitSuccess = accountService.debit(fromAccount, amount);
        boolean creditSuccess = accountService.credit(toAccount, amount);

        if (debitSuccess && creditSuccess) {
            return "SUCCESS: Transfer completed";
        } else {
            return "FAILURE: Transaction error";
        }
    }
}
